(this.webpackJsonpfashionstore=this.webpackJsonpfashionstore||[]).push([[0],{65:function(e,t,a){e.exports=a(96)},70:function(e,t,a){},71:function(e,t,a){},93:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=(a(70),a(71),a(9)),i=a(54),u=a(7),s={fashions:[]},d={msg:{},status:null},m={isAuthenticated:null,user:null,token:localStorage.getItem("token"),isLoading:!1},p=Object(l.combineReducers)({fashionsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FASHIONS":return Object(u.a)(Object(u.a)({},e),{},{fashions:t.payload});default:return e}},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_ACTION":return{msg:t.payload.msg,status:t.payload.status};default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,user:t.payload,isLoading:!1});case"LOGIN_SUCCESS":case"SIGNUP SUCCESS":return localStorage.setItem("token",t.payload.token),Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_ACTION":case"SIGNUP_FAIL":return localStorage.removeItem("token"),Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isAuthenticated:!1,user:null,token:null});default:return e}}}),h=[a(56).a],E=Object(l.createStore)(p,{},Object(i.composeWithDevTools)(l.applyMiddleware.apply(void 0,h))),f=a(15),g=a(24),b=a(6),v=a(23),O=a.n(v),y=function(e,t){return{type:"ERROR_ACTION",payload:{msg:e,status:t}}},j=function(){return function(e){O.a.get("/api/fashions",{timeout:2e3,timeoutErrorMessage:"Request Time out"}).then((function(t){e({type:"GET_FASHIONS",payload:t.data})})).catch((function(t){e(y(t.response.data,t.response.status))}))}},C=(a(93),a(98)),S=a(102),k=a(103),w=a(104);var A=function(e){e.history,e.location;var t=e.fashions,a=e.goDetail;document.title="Fashion Store | Dashboard";var n=t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("span",null,r.a.createElement("img",{src:e.image,alt:"spider-lady"}),r.a.createElement("p",null,e.title),r.a.createElement(C.a,{onClick:function(){a(e.id)},variant:"dark"},"Find out")))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home"},r.a.createElement(w.a,null,n)))},N=a(101);var I=function(e){e.history;var t=e.location.state,a=Object.values(t).filter((function(e,t,a){return String(e).match(".jpg")?e:null}));document.title=t.title;var n=a.map((function(e,t,a){return r.a.createElement(N.a.Item,{key:t},r.a.createElement("img",{src:e,alt:"asc"}))}));return r.a.createElement("div",{className:"detailed"},r.a.createElement(N.a,null,n),r.a.createElement("h3",null,t.title),r.a.createElement("p",null,t.description))},R=a(25),G=a(26),L=a(100),P=a(99),F=function(e,t){return function(a){var n=JSON.stringify({username:e,password:t});O.a.post("/api/auth/login",n,{headers:{"Content-Type":"application/json"}}).then((function(e){a({type:"LOGIN_SUCCESS",payload:e.data})})).catch((function(e){a(y(e.response.data,e.response.status)),a({type:"LOGIN_FAIL"})}))}},T=function(){return function(e,t){O.a.post("/api/auth/logout",null,_(t)).then((function(t){return e({type:"LOGOUT_ACTION"})})).catch((function(t){e(y(t.response.data,t.response.status))}))}},_=function(e){var t={headers:{"Content-Type":"application/json"}},a=e().authReducer.token;return a&&(t.headers.Authorization="Token ".concat(a)),t},U=function(e,t,a){return function(n){var r=JSON.stringify({username:e,password:t,email:a});console.log(r),O.a.post("/api/auth/register",r,{headers:{"Content-Type":"application/json"}}).then((function(e){n({type:"SIGNUP SUCCESS",payload:e.data})})).catch((function(e){n(y(e.response.data,e.response.status)),n({type:"SIGNUP_FAIL"})}))}};var x=Object(f.b)((function(e){return{isAuthenticated:e.authReducer.isAuthenticated,errors:e.errorReducer.msg}}),(function(e){return Object(l.bindActionCreators)({login:F},e)}))((function(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)({username:"",password:""}),i=Object(G.a)(l,2),s=i[0],d=i[1];document.title="Fashion Store | Login";var m=function(e){return d(Object(u.a)(Object(u.a)({},s),{},Object(R.a)({},e.target.name,e.target.value)))};if(e.isAuthenticated)return r.a.createElement(b.a,{to:"/"});var p=s.username,h=s.password;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{style:{backdropFilter:"blur(13px)",backgroundColor:"#00000086",position:"absolute",height:"100%",width:"100%"}}),r.a.createElement(L.a,{noValidate:!0,validated:o,className:"formaction",onSubmit:function(t){var a=t.currentTarget;t.preventDefault(),!1===a.checkValidity()&&t.stopPropagation(),c(!0),e.login(s.username,s.password)}},r.a.createElement("center",null,r.a.createElement("h3",null,"Login")),r.a.createElement(L.a.Group,{controlId:"validationCustomUsername"},r.a.createElement(P.a,null,r.a.createElement(P.a.Prepend,null,r.a.createElement(P.a.Text,{id:"inputGroupPrepend"},"@")),r.a.createElement(L.a.Control,{type:"text",placeholder:"Username",name:"username",value:p,"aria-describedby":"inputGroupPrepend",required:!0,onChange:m}),r.a.createElement(L.a.Control.Feedback,{type:"invalid"},"Please choose a username."))),r.a.createElement(L.a.Group,{controlId:"validationCustomPassword"},r.a.createElement(P.a,null,r.a.createElement(P.a.Prepend,null,r.a.createElement(P.a.Text,{id:"inputGroupPrepend"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.a.createElement(L.a.Control,{required:!0,name:"password",type:"password",value:h,placeholder:"Password",onChange:m})," ",r.a.createElement(L.a.Control.Feedback,{type:"invalid"},"Please enter password"))),r.a.createElement("small",{className:"text-danger ml-5"},e.errors.non_field_errors),r.a.createElement("center",null,r.a.createElement(C.a,{variant:"primary",type:"submit"},"Login"))))}));var D=Object(f.b)((function(e){return{isAuthenticated:e.authReducer.isAuthenticated}}),(function(e){return Object(l.bindActionCreators)({signup:U},e)}))((function(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)({username:"",password:"",email:""}),i=Object(G.a)(l,2),s=i[0],d=i[1];document.title="Fashion Store | Signup";var m=function(e){return d(Object(u.a)(Object(u.a)({},s),{},Object(R.a)({},e.target.name,e.target.value)))};return e.isAuthenticated?r.a.createElement(b.a,{to:"/"}):r.a.createElement("div",{className:"login"},r.a.createElement("div",{style:{backdropFilter:"blur(13px)",backgroundColor:"#00000086",position:"absolute",height:"100%",width:"100%"}}),r.a.createElement(L.a,{noValidate:!0,validated:o,className:"formaction",onSubmit:function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&t.stopPropagation(),c(!0),e.signup(s.username,s.password,s.email)}},r.a.createElement("center",null,r.a.createElement("h3",null,"Login")),r.a.createElement(L.a.Group,{controlId:"validationCustomUsername"},r.a.createElement(P.a,null,r.a.createElement(P.a.Prepend,null,r.a.createElement(P.a.Text,{id:"inputGroupPrepend"},"@")),r.a.createElement(L.a.Control,{type:"text",placeholder:"Username",name:"username",value:s.username,"aria-describedby":"inputGroupPrepend",onChange:m,required:!0}),r.a.createElement(L.a.Control.Feedback,{type:"invalid"},"Please enter a username."))),r.a.createElement(L.a.Group,{controlId:"validationCustomEmail"},r.a.createElement(P.a,null,r.a.createElement(P.a.Prepend,null,r.a.createElement(P.a.Text,{id:"inputGroupPrepend"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}))),r.a.createElement(L.a.Control,{type:"email",placeholder:"Email",name:"email",value:s.email,onChange:m,"aria-describedby":"inputGroupPrepend",required:!0}),r.a.createElement(L.a.Control.Feedback,{type:"invalid"},"Enter a valid email."))),r.a.createElement(L.a.Group,{controlId:"validationCustomPassword"},r.a.createElement(P.a,null,r.a.createElement(P.a.Prepend,null,r.a.createElement(P.a.Text,{id:"inputGroupPrepend"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.a.createElement(L.a.Control,{required:!0,name:"password",value:s.password,type:"password",placeholder:"Password",onChange:m})," ",r.a.createElement(L.a.Control.Feedback,{type:"invalid"},"Please enter password"))),r.a.createElement("center",null,r.a.createElement(C.a,{variant:"primary",type:"submit"},"Register"))))})),q=a(63),H=Object(f.b)((function(e){return{auth:e.authReducer}}))((function(e){var t=e.render,a=e.auth,n=Object(q.a)(e,["render","auth"]);return r.a.createElement(b.b,Object.assign({},n,{render:function(e){return a.isLoading?r.a.createElement("h1",null,"Loading..."):a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(b.a,{to:"/login"})}}))}));var J=Object(f.b)((function(e){return{fashions:e.fashionsReducer.fashions,auth:e.authReducer}}),(function(e){return Object(l.bindActionCreators)({getFashions:j,logout:T},e)}))((function(e){var t=e.getFashions,a=e.fashions,o=e.auth,c=Object(b.g)(),l=Object(b.h)();Object(n.useEffect)((function(){return t(),function(){return null}}),[t]),Object(n.useEffect)((function(){E.dispatch((function(e,t){e({type:"USER_LOADING"}),O.a.get("/api/auth/user",_(t)).then((function(t){e({type:"USER_LOADED",payload:t.data})})).catch((function(t){e(y(t.response.data,t.response.status)),e({type:"AUTH_ERROR"})}))}))}),[]);var i=e.fashions.map((function(e,t,a){return{image:e.image_main,title:e.title,id:e.id}})),u=l.pathname.match("/login")?r.a.createElement(C.a,{onClick:function(){return c.push("/signup")}},"Register"):r.a.createElement(C.a,{onClick:function(){return c.push("/login")}},"Login"),s=o.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nav-text mr-3 mt-1  text-light "},"Welcome ".concat(o.user.username)),r.a.createElement(C.a,{size:"sm",onClick:function(){e.logout(),c.replace("/")}},"Logout")):"";return r.a.createElement(n.Fragment,null,r.a.createElement(S.a,{fixed:"top",className:"navbar",variant:"dark"},r.a.createElement(S.a.Brand,{className:"brand"},"Fashion Store"),r.a.createElement(k.a,null,o.isAuthenticated?s:u)),r.a.createElement(n.Fragment,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/signup",component:D}),r.a.createElement(b.b,{path:"/login",component:x}),r.a.createElement(b.b,{path:"/detailed/:id",component:I}),r.a.createElement(H,{path:"/",render:function(e){return r.a.createElement(A,Object.assign({},e,{fashions:i,goDetail:function(e){c.push("/detailed/".concat(e),a[e-1])}}))}}))))}));var V=function(){return Object(n.useEffect)((function(){})),r.a.createElement(f.a,{store:E},r.a.createElement(g.a,null,r.a.createElement(J,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.c7729416.chunk.js.map